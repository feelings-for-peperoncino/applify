<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Applify</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

  <main class="text-center main">
    <div id="top-view" class="top-view">
      <div class="top-view-header">
        <div>
          <img src="img/applecaアセット 2@3x.png" alt="" width="300">
        </div>
        <div>
          <img src="img/applecaアセット 3@3x.png" alt="" width="300">
        </div>
      </div>

      <div class="top-view-content">
        <div>
          <img src="img/red-apple.png" alt="" width="100">
        </div>

        <div class="py-3">
          <img src="img/title-logo.png" alt="" width="250">
        </div>

        <div class="container px-5">
          <div class="row flex-column g-3">
            <div class="col">
              <img src="img/level1.png" alt="" id="level1" class="level-btn">
            </div>
            <div class="col">
              <img src="img/level2.png" alt="" class="level-btn">
            </div>
            <div class="col">
              <img src="img/level3.png" alt="" class="level-btn">
            </div>
          </div>
        </div>
      </div>

      <div class="top-view-footer">
        <img src="img/applelevelアセット 6@3x.png" alt="" width="350">
      </div>
    </div>

    <div id="question-view" class="question-view d-none">
      <div class="container question-view-header">
        <div class="row align-items-center">
          <div class="col">
            <a href=""><img src="img/title-logo.png" alt="" width="100"></a>
          </div>
          <div class="col">
            <p class="question-view-header-level">LEVEL1</p>
          </div>
        </div>

      </div>



      <div class="question-view-content">



        <div id="question" class="question fs-1 pt-5">
          <div id="appleContainer">
            <!-- 最初の数に応じてyellow appleが表示される -->
          </div>
          <div style="text-align: center;">
            <div style="position: relative; width: 300px; height: 300px; display: inline-block;">
              <img src="img/scale.png" style="width: 100%; height: 50%;" />
              <p id="resultText"
                style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); font-size: 30px; color: black;">
                5</p>
            </div>
          </div>










        </div>

        <div class="container" style="padding: 20px 100px;">
          <div class="row align-items-center">
            <div class="col">
              <img src="img/yellow-apple.png" alt="" width="80px">
            </div>
            <div class="col">
              <p class="equal">=</p>
            </div>
            <div class="col waku">
              <div id="answer" class="answer fs-1">
                <p id="userAnswer"></p>
              </div>
            </div>
          </div>

        </div>

        <div class="container">
          <div class="row px-5 row-cols-3 g-3">
            <img src="img/n1.png" alt="1" width="100" onclick="inputNumber(1)" class="col">
            <img src="img/n2.png" alt="2" width="100" onclick="inputNumber(2)" class="col">
            <img src="img/n3.png" alt="3" width="100" onclick="inputNumber(3)" class="col">
            <img src="img/n4.png" alt="4" width="100" onclick="inputNumber(4)" class="col">
            <img src="img/n5.png" alt="5" width="100" onclick="inputNumber(5)" class="col">
            <img src="img/n6.png" alt="6" width="100" onclick="inputNumber(6)" class="col">
            <img src="img/n7.png" alt="7" width="100" onclick="inputNumber(7)" class="col">
            <img src="img/n8.png" alt="8" width="100" onclick="inputNumber(8)" class="col">
            <img src="img/n9.png" alt="9" width="100" onclick="inputNumber(9)" class="col">
            <img src="img/n0.png" alt="0" width="100" onclick="inputNumber(0)" class="col">
            <img src="img/nc.png" alt="C" width="100" onclick="clearAnswer()" class="col">
            <img src="img/nok.png" alt="OK" width="100" onclick="checkAnswer()" class="col">
          </div>
        </div>
      </div>

      <script>
        let correctAnswer = 0;
        let secondNumber = 0;
        let questionCount = 0;

        function generateMultiplicationQuestion() {
          // ランダムに3以下の数値を選択
          let num1 = Math.floor(Math.random() * 3) + 1; // りんごの数 (x)
          secondNumber = Math.floor(Math.random() * 3) + 1; // りんご1つの重さ (y)

          // スケールに表示する合計の重さ (z)
          let totalWeight = num1 * secondNumber;

          // 合計の重さをスケールの上に表示
          document.getElementById('resultText').innerText = totalWeight;

          // りんごの数に応じてyellow appleを表示
          let appleContainer = document.getElementById('appleContainer');
          appleContainer.innerHTML = ''; // 以前のりんご画像をクリア
          for (let i = 0; i < num1; i++) {
            let img = document.createElement('img');
            img.src = 'img/yellow-apple.png';
            img.alt = 'yellow apple';
            img.className = 'yellow-apple';
            appleContainer.appendChild(img);
          }

          // 正解の重さを設定 (ユーザーが答えるべき値)
          correctAnswer = secondNumber;

          // ユーザーアンサーをクリア
          document.getElementById('userAnswer').innerText = '';
        }

        function inputNumber(num) {
          let currentAnswer = document.getElementById('userAnswer').innerText;
          document.getElementById('userAnswer').innerText = currentAnswer + num;
        }

        function clearAnswer() {
          document.getElementById('userAnswer').innerText = '';
        }

        function checkAnswer() {
          let userAnswer = parseInt(document.getElementById('userAnswer').innerText);
          if (userAnswer === correctAnswer) {
            questionCount++;
            if (questionCount < 3) {
              alert('good');
              clearAnswer();
              generateMultiplicationQuestion();
            } else {
              alert('すべて正解しました！');
              clearAnswer();
              questionCount = 0;
              generateMultiplicationQuestion(); // 最初の問題に戻る
            }
          } else {
            alert('try again');
          }
        }

        // 初期化
        generateMultiplicationQuestion();
      </script>










      <div class="question-view-footer">

      </div>

    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
    crossorigin="anonymous"></script>
  <script src="js/script.js"></script>

  <script>
    // lebelボタンを押すと#question-viewが表示される
    document.querySelector('#level1').addEventListener('click', () => {
      document.querySelector('#top-view').classList.add('d-none');
      document.querySelector('#question-view').classList.remove('d-none');
    });
  </script>
</body>

</html>